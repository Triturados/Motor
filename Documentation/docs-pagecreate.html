<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>LoveEngine - Documentación</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Bootstrap 4 Template For Software Startups">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">
    
    <!-- FontAwesome JS-->
    <script defer src="assets/fontawesome/js/all.min.js"></script>
    
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.2/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="assets/plugins/simplelightbox/simple-lightbox.min.css">

    <!-- Theme CSS -->  
    <link id="theme-style" rel="stylesheet" href="assets/css/theme.css">

</head> 

<body class="docs-page">    
    <header class="header fixed-top">	    
        <div class="branding docs-branding">
            <div class="container-fluid position-relative py-2">
                <div class="docs-logo-wrapper">
					<button id="docs-sidebar-toggler" class="docs-sidebar-toggler docs-sidebar-visible me-2 d-xl-none" type="button">
	                    <span></span>
	                    <span></span>
	                    <span></span>
	                </button>
	                <div class="site-logo"><a class="navbar-brand" href="index.html"><img class="logo-icon me-2" src="assets/images/coderdocs-logo.svg" alt="logo"><span class="logo-text">LOVE <span class="text-alt">Engine</span></span></a></div>    
                </div><!--//docs-logo-wrapper-->
	            <div class="docs-top-utilities d-flex justify-content-end align-items-center">
	               
	
					<ul class="social-list list-inline mx-md-3 mx-lg-5 mb-0 d-none d-lg-flex">
						<li class="list-inline-item"><a href="https://github.com/Triturados/Motor"><i class="fab fa-github fa-fw"></i></a></li>
		            </ul><!--//social-list-->
		            <a href="https://www.youtube.com/watch?v=mCdA4bJAGGk" class="btn btn-primary d-none d-lg-flex">Descargar</a>
	            </div><!--//docs-top-utilities-->
            </div><!--//container-->
        </div><!--//branding-->
    </header><!--//header-->
    
    
    <div class="docs-wrapper">
	    <div id="docs-sidebar" class="docs-sidebar">
		    <div class="top-search-box d-lg-none p-3">
                <form class="search-form">
		            <input type="text" placeholder="Search the docs..." name="search" class="form-control search-input">
		            <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i></button>
		        </form>
            </div>
		    <nav id="docs-nav" class="docs-nav navbar">
			    <ul class="section-items list-unstyled nav flex-column pb-3">
					<li class="nav-item section-title mt-3"><a class="nav-link scrollto" href="#section-create"><span class="theme-icon-holder me-2"><i class="fas fa-laptop-code"></i></span>Crea tu propio componente</a></li>
				    <li class="nav-item section-title mt-3"><a class="nav-link scrollto" href="#section-createscene"><span class="theme-icon-holder me-2"><i class="fas fa-laptop-code"></i></span>Crea tu propia escena</a></li>
					<li class="nav-item"><a class="nav-link scrollto" href="#item-3-1-1">Forma de tabla</a></li>
					<li class="nav-item"><a class="nav-link scrollto" href="#item-3-1-2">Forma funcional</a></li>
					<li class="nav-item section-title mt-3"><a  class="card-link-mask" href="docs-page.html"><span class="theme-icon-holder me-2"><i class="fas fa-laptop-code"></i></span>Volver a la documentación </a></li>
				    <!-- <li class="nav-item section-title mt-3"><a class="nav-link scrollto" href="#section-9"><span class="theme-icon-holder me-2"><i class="fas fa-lightbulb"></i></span>FAQs</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-9-1">Instalación</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-9-2">Motor</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-9-3">Otros</a></li> -->
			    </ul>

		    </nav><!--//docs-nav-->
	    </div><!--//docs-sidebar-->
	    <div class="docs-content">
		    <div class="container">
			    
				<article class="docs-article" id="section-create">
				    <header class="docs-header">
					    <h1 class="docs-heading">Crea tu propio componente</h1>
					    <section class="docs-intro">
						    <p>Para crear tu propio Componente tienes que crear un archivo .h, recomendable el crear tambien un .cpp para definir los metodos del mismo. 
								Este archivo .h tiene que incluir la clase Componente.h y hacer que el componente que creeis herede de esta como se ve en el ejemplo acontinuacion. 
							</p>
							<div class="docs-code-block">
								<pre class="shadow-lg rounded"><code class="json hljs">#include <Component.h>

namespace LoveEngine {
	namespace Input {
		class InputManager;
	}
									
	namespace ECS {
		class Transform;
		class RigidBody;
											
		class MovimientoJugador : public Component {
												
			private:
				float MAX_SPEED = 15;
									
				RigidBody* bossRb;
				Transform* bossTr;	

				float movementZ = 0;
				float movementX = 0;
									
				float dashDelay = 1; //Cada cuanto tiempo puedes dashear
			public:
				void init() override;
				void postInit() override;
				void update() override;
				void stepPhysics() override;				
				void receiveMessage(Utilities::StringFormatter& message) override;
				void receiveComponent(int, Component*) override;
									
				void dash();
				inline float getSpeed() { return speed; };
				inline float getMaxSpeed() { return MAX_SPEED; };
			};
	}
}</code></pre>

<div class="callout-block callout-block-info">
                            
	<div class="content">
		<h4 class="callout-title">
			<span class="callout-icon-holder me-1">
				<i class="fas fa-info-circle"></i>
			</span><!--//icon-holder-->
			Nota
		</h4>
		<p> Se aconseja poner override en los <a href="#item-3-2"> metodos predifinidos</a> por la clase componente</p>
	</div><!--//content-->
</div><!--//callout-block-->

<p>Solo con esto ya hemos creado nuestro componente, aunque aún no hemos terminado. Si bien este componente ya es válido y completamente funcional, éste sólo podrá ser accedido a través de otros archivos de código en c++, pues aún no lo hemos declarado para las escenas creadas en Lua. Es recomendable crear un archivo donde definir todos los componentes del juego. El proceso de declaración de componentes en Lua es el siguiente:</p>
							<p>	-Incluir la cabecera ComponentFactory.h</p>
								<p>	-Acceder al singleton ‘ComponentFactory’</p>
									<p>	-Crear un puntero a ‘ComponentCreatorTemplate’. Como argumento de plantilla recibirá como parámetro el componente creado, y de parámetro una cadena de texto la cual representará el nombre con el que queremos que se asocie este componente a Lua.</p>
										<p>	-Registrar con el método ‘registerComponent’ mandando como parámetro el puntero de creación de componente creado.</p>


							<div class="docs-code-block">
								<pre class="shadow-lg rounded"><code class="json hljs">
template <class t>
	void newComponent(std::string name) {
		inst->registerComponent(new ComponentCreatorTemplate<t>(name));
	}
}</code></pre>
							<div class="callout-block callout-block-info">
                            
								<div class="content">
									<h4 class="callout-title">
										<span class="callout-icon-holder me-1">
											<i class="fas fa-info-circle"></i>
										</span><!--//icon-holder-->
										Nota
									</h4>
									<p> inst es el puntero al singleton de la factoría de componentes</p>
								</div><!--//content-->
							</div><!--//callout-block-->


							<p>De esta forma, cada vez que queramos declarar un componente nuevo bastaría con llamar la función de la siguiente forma:</p>

							<div class="docs-code-block">
							<pre class="shadow-lg rounded"><code class="json hljs"> newComponent<ComponenteDePrueba>(“ComponenteDePrueba”);</code></pre>
		
								<div class="callout-block callout-block-info">
                            
									<div class="content">
										<h4 class="callout-title">
											<span class="callout-icon-holder me-1">
												<i class="fas fa-info-circle"></i>
											</span><!--//icon-holder-->
											Nota
										</h4>
										<p> Es necesario haber incluido la cabecera del componente creado</p>
									</div><!--//content-->
								</div><!--//callout-block-->

								<p> Este acercamiento a la hora de crear componentes nos dota de varias ventajas:</p>
								<p>		 -Poder crear componentes auxiliares: Componentes que se usan únicamente en ciertas partes del código en c++ pero que no queremos hacer públicos desde Lua</p>
								<p>		 -Poder tener variaciones de nombres entre c++ y Lua, en el caso de que tengamos algún nombre más técnico en el código fuente que no sea muy práctico de usar en Lua</p>
								<p>	  	 -Poder asociar varios nombres al mismo componente. ¿No os decidís si llamar a un componente AudioManager o SoundManager? Prueba a ponerle ambos</p>
						</section><!--//docs-intro-->
				    </header>
				   


			    </article><!--//docs-article-->
			    
				<article class="docs-article" id="section-createscene">
				    <header class="docs-header">
					    <h1 class="docs-heading">Crea tu propia escena</h1>
					    <section class="docs-intro">
						    <p>Las escenas se crearán usando Lua como lenguaje de scripting. El punto de entrada para la creación de escenas deberá ser en un archivo llamado 
								‘Scenes.lua’, situado en la raíz de la carpeta resources. Aunque no es necesario que las escenas estén definidas dentro de este archivo 
								siempre que se importe el módulo del archivo de Lua en el que se haya creado.
	
								Para importar un archivo de lua basta con usar la función ‘require’ seguido de una cadena con el nombre del fichero.
								</p>
	
								<div class="callout-block callout-block-info">
								
									<div class="content">
										<h4 class="callout-title">
											<span class="callout-icon-holder me-1">
												<i class="fas fa-info-circle"></i>
											</span><!--//icon-holder-->
											Nota
										</h4>
										<p> Para más información sobre cómo usar Lua  pulse <a href="https://www.lua.org/manual/5.1/es"> aquí</a>.</p>
									</div><!--//content-->
								</div><!--//callout-block-->
	
								<p>Las escenas van numeradas empezando desde cero, y deben ser llamadas ‘scene’ seguido de su respectivo índice. LoveEngine permite dos formas 
									de definir las escenas: en forma de tabla y de manera funcional. </p>
								
									
									<section class="docs-section" id="item-3-1-1">
										<h2 class="section-heading">Forma de Tabla</h2>
										<p>Para crear de esta forma una escena hay que crear una variable global en Lua con el nombre de la escena correspondiente, por ejemplo ‘scene0’ para la 
											tercera escena del juego (recordemos que las escenas empiezan siendo indexadas desde cero), y abrimos corchetes para empezar a definir nuestra escena.
											</p>
											<p>Definir la escena: En esta tabla se define el nombre de la escena (mediante el atributo ‘name’) y se define el atributo ‘objects’ el cual es un vector de objetos. </p>
	
											<p>Definir un objeto: Un objeto contiene dos atributos que se pueden modificar. Siendo el primero de ellos el nombre con el atributo ‘name’, en caso de que queramos que un objeto tenga un nombre predefinido, y el vector de componentes que viene asociado al objeto con el atributo ‘components’
											</p>
											<p>Definir un componente: Para definir un componente hay que asignar de manera obligatoria el atributo ‘type’, el cual define el tipo del componente. El componente que añadamos aquí deberá haber sido declarados desde el proyecto de c++ para poder ser usado desde Lua. Todos los componentes que vienen con LoveEngine vienen ya declarados. 
											Además, un componente viene con un segundo atributo opcional llamado ‘info’. Este atributo es una cadena de texto la cual cuenta con los parámetros que serán pasados al objeto en su creación. Para más información sobre el paso de parámetros a objetos consultar el apartado <a  href="#item-12-1" >stringFormatter</a>.
											</p>
	
											<p>Un ejemplo de una escena definida mediante una tabla es el siguiente:
												</p>
	
												<div class="docs-code-block">
													<pre class="shadow-lg rounded"><code class="json hljs">scene0 = {
			name = “Menu de Pausa”,
			objects = {
					{
						name = “Fondo”,
						components = {
								{
										type = “Image”
										info = [[
										material: pauseMenu; 
												width: 1280;
												  height : 720;
										]]
								}
							}
						}, 
						{
							name = “BotonContinuar”,
							components = {
								{
									type = “ContinueButton”
									info = [[
									material: buttonMaterial; 
									]]
								}
							}
						}
			}
	}	</code></pre>
												</div><!--//docs-code-block-->
									</section><!--//section-->
	
									<div class="callout-block callout-block-info">
								
										<div class="content">
											<h4 class="callout-title">
												<span class="callout-icon-holder me-1">
													<i class="fas fa-info-circle"></i>
												</span><!--//icon-holder-->
												Nota
											</h4>
											<p> Esta escena asume que existe el componente ‘ContinueButton’ y los materiales buttonMaterial y pauseMenu.</p>
										</div><!--//content-->
									</div><!--//callout-block-->
	
	
									<p>Por último, una escena puede definir un último atributo, el atributo ‘code’. Este atributo debe ser una 
										función y se comporta igual que la creación de una escena funcional. Útil en caso de querer realizar operaciones
										 o instrucciones de Lua (como condicionales y bucles) o usar querer usar funcionalidades exclusivas de la creación de escenas de forma funcional.
									</p>
						</section><!--//docs-intro-->



						<section class="docs-section" id="item-3-1-2">
							<h2 class="section-heading">Funcional</h2>
							<p>Para crear de esta forma una escena hay que crear funcion en LUA y darle el nombre de la escena que vamos a usar.
								</p>
								<p>Definir la escena: En esta funcion se define el nombre de la escena (mediante el atributo ‘name’). </p>

								<p>Definir un objeto: Un objeto contiene dos atributos que se pueden modificar. Siendo el primero de ellos el nombre con el atributo ‘name’, en caso de que queramos que un objeto tenga un nombre predefinido, y el vector de componentes con una serie de metodos que tienen los objetos.
								</p>
								<p>Definir un componente: Para definir un componente hay que asignar de manera obligatoria el componente a gameObject (addComponent). El componente que añadamos aquí deberá haber sido declarados desde el proyecto de c++ para poder ser usado desde Lua. Todos los componentes que vienen con LoveEngine vienen ya declarados. 
								Además, un componente viene con un segundo metodo opcional llamado (sendMsg). Este metodo es una cadena de texto la cual cuenta con los parámetros que serán pasados al objeto en su creación. Para más información sobre el paso de parámetros a objetos consultar el apartado  <a  href="#item-12-1" >stringFormatter</a>.
								</p>

								<p>Un ejemplo de una escena definida mediante una tabla es el siguiente:
									</p>

									<div class="docs-code-block">
										<pre class="shadow-lg rounded"><code class="json hljs">function sceneOverworld() -- Overworld
		scene:name("Escena Overworld")
										
		--MURO1
		local muro1 = scene:createObject("muro1")
		local muroTr1 = muro1:addComponent("Transform")
		muroTr1:sendMsg([[
			scale: 1,10,150;
			position: -150,10,0;
			rotation: 0,0,0;
		]])
		local rBMuro1 = muro1:addComponent('Rigidbody')
		rBMuro1:sendMsg([[
			trigger: false;
			state: kinematic;
			mass: 0.0;
			shape: cube;
			restitution: 0.9;
			colliderScale: 10,30,150;
		]])
										
										
		--MURO2
		local muro2 = scene:createObject("muro2")
		local muroTr2 = muro2:addComponent("Transform")
										
		muroTr2:sendMsg([[
			scale: 1,10,150;
			position: 150,10,0;
			rotation: 0,0,0;
		]])
										
		local rBMuro2 = muro2:addComponent('Rigidbody')
		rBMuro2:sendMsg([[
			trigger: false;
			state: kinematic;
			mass: 0.0;
			shape: cube;
			restitution: 0.9;
			colliderScale: 10,30,150;
		]])
end</code></pre>
									</div><!--//docs-code-block-->
						</section><!--//section-->

			</section><!--//docs-intro-->
				    </header>
				   
			    </article><!--//docs-article-->


			    <footer class="footer">
				    <div class="container text-center py-5">
				        <small class="copyright">Copyright &copy; <a href="https://github.com/Triturados" target="_blank">Triturados</a></small>
				        <ul class="social-list list-unstyled pt-4 mb-0">
						    <li class="list-inline-item"><a href="https://github.com/Triturados/Motor"><i class="fab fa-github fa-fw"></i></a></li> 
				            <!-- <li class="list-inline-item"><a href="#"><i class="fab fa-twitter fa-fw"></i></a></li>
				            <li class="list-inline-item"><a href="#"><i class="fab fa-slack fa-fw"></i></a></li>
				            <li class="list-inline-item"><a href="#"><i class="fab fa-product-hunt fa-fw"></i></a></li>
				            <li class="list-inline-item"><a href="#"><i class="fab fa-facebook-f fa-fw"></i></a></li>
				            <li class="list-inline-item"><a href="#"><i class="fab fa-instagram fa-fw"></i></a></li> -->
				        </ul><!--//social-list-->
				    </div>
			    </footer>
		    </div> 
	    </div>
    </div><!--//docs-wrapper-->
   
       
    <!-- Javascript -->          
    <script src="assets/plugins/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>  
    
    
    <!-- Page Specific JS -->
    <script src="assets/plugins/smoothscroll.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
    <script src="assets/js/highlight-custom.js"></script> 
    <script src="assets/plugins/simplelightbox/simple-lightbox.min.js"></script>      
    <script src="assets/plugins/gumshoe/gumshoe.polyfills.min.js"></script> 
    <script src="assets/js/docs.js"></script> 

</body>
</html> 

